---
layout: post
title: "Quasigroups"
description: "A brief introduction to quasigroups for object-oriented programmers."
date: 2017-12-18 13:31 UTC
tags: [Software Design]
---
{% include JB/setup %}

<div id="post">
	<p>
		<em>{{ page.description }}</em>
	</p>
	<p>
		This article is part of <a href="/2017/10/05/monoids-semigroups-and-friends">a larger series about monoids, semigroups, and other group-like algebraic structures</a>. In this article, you'll get acquainted with the concept of a quasigroup. I don't think it plays that big of a role in software design, but it <em>is</em> a thing, and I thought that I'd cover it briefly with a well known-example.
	</p>
	<p>
		During all this talk of <a href="/2017/10/06/monoids">monoids</a> and <a href="/2017/11/27/semigroups">semigroups</a>, you've seen that normal arithmetic operations like addition and multiplication form monoids. Perhaps you've been wondering where subtraction fits in.
	</p>
	<p>
		Subtraction forms a quasigroup.
	</p>
	<p>
		What's a quasigroup? It's an invertible binary operation.
	</p>
	<h3 id="bfc345d0a2c34954a254e4de21253380">
		Inversion <a href="#bfc345d0a2c34954a254e4de21253380" title="permalink">#</a>
	</h3>
	<p>
		What does it mean for a binary operation to be invertible? It means that for any two elements <code>a</code> and <code>b</code>, there must exist two other elements <code>x</code> and <code>y</code> that turns <code>a</code> into <code>b</code>.
	</p>
	<p>
		This is true for subtraction, as this <a href="https://fscheck.github.io/FsCheck">FsCheck</a>-based test demonstrates:
	</p>
	<p>
		<pre>[<span style="color:#2b91af;">Property</span>(QuietOnSuccess&nbsp;=&nbsp;<span style="color:blue;">true</span>)]
<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">void</span>&nbsp;SubtractionIsInvertible(<span style="color:blue;">int</span>&nbsp;a,&nbsp;<span style="color:blue;">int</span>&nbsp;b)
{
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;x&nbsp;=&nbsp;a&nbsp;-&nbsp;b;
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;y&nbsp;=&nbsp;a&nbsp;+&nbsp;b;
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#2b91af;">Assert</span>.True(a&nbsp;-&nbsp;x&nbsp;==&nbsp;b);
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#2b91af;">Assert</span>.True(y&nbsp;-&nbsp;a&nbsp;==&nbsp;b);
}</pre>
	</p>
	<p>
		This example uses the <a href="https://www.nuget.org/packages/FsCheck.Xunit">FsCheck.Xunit</a> glue library for <a href="https://xunit.net">xUnit.net</a>. Notice that although FsCheck is written in F#, you can also use it from C#. This test (as well as all other tests in this article) passes.
	</p>
	<p>
		For any <code>a</code> and <code>b</code> generated by FsCheck, we can calculate unique <code>x</code> and <code>y</code> that satisfy <code>a - x == b</code> and <code>y - a == b</code>.
	</p>
	<p>
		Subtraction isn't the only invertible binary operation. In fact, addition is also invertible:
	</p>
	<p>
		<pre>[<span style="color:#2b91af;">Property</span>(QuietOnSuccess&nbsp;=&nbsp;<span style="color:blue;">true</span>)]
<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">void</span>&nbsp;AdditionIsInvertible(<span style="color:blue;">int</span>&nbsp;a,&nbsp;<span style="color:blue;">int</span>&nbsp;b)
{
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;x&nbsp;=&nbsp;b&nbsp;-&nbsp;a;
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;y&nbsp;=&nbsp;b&nbsp;-&nbsp;a;
 
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#2b91af;">Assert</span>.True(a&nbsp;+&nbsp;x&nbsp;==&nbsp;b);
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#2b91af;">Assert</span>.True(y&nbsp;+&nbsp;a&nbsp;==&nbsp;b);
 
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#2b91af;">Assert</span>.Equal(x,&nbsp;y);
}</pre>
	</p>
	<p>
		Here I added a third assertion that demonstrates that for addition, the inversion is symmetric; <code>x</code> and <code>y</code> are equal.
	</p>
	<p>
		Not only is integer addition a monoid - it's also a quasigroup. In fact, it's a <a href="https://en.wikipedia.org/wiki/Group_(mathematics)">group</a>. Being associative or having identity doesn't preclude a binary operation from being a quasigroup, but these properties aren't required.
	</p>
	<h3 id="5b8c084b14f5432a89e26a34a7654e27">
		No identity <a href="#5b8c084b14f5432a89e26a34a7654e27" title="permalink">#</a>
	</h3>
	<p>
		No identity element exists for integer subtraction. For instance, <em>3 - 0</em> is <em>3</em>, but <em>0 - 3</em> is <em>not 3</em>. Therefore, subtraction can't be a monoid.
	</p>
	<h3 id="c568fdbfa6de4c65a99a97bd82cba4e5">
		No associativity <a href="#c568fdbfa6de4c65a99a97bd82cba4e5" title="permalink">#</a>
	</h3>
	<p>
		Likewise, subtraction is not an associative operation. You can easily convince yourself of that by coming up with a counter-example, such as <em>(3 - 2) - 1</em>, which is <em>0</em>, but different from <em>3 - (2 - 1)</em>, which is <em>2</em>. Therefore, it can't be a semigroup either.
	</p>
	<h3 id="697353c1095c446380f28ef029663238">
		Summary <a href="#697353c1095c446380f28ef029663238" title="permalink">#</a>
	</h3>
	<p>
		A quasigroup is an invertible binary operation. Invertibility is the only <em>required</em> property of a quasigroup (apart from being a binary operation), but if it has other properties (like associativity), it's still a quasigroup.
	</p>
	<p>
		I haven't had much utility from thinking about software design in terms of quasigroups, but I wanted to include it in case you were wondering how subtraction fits into all of this.
	</p>
	<p>
		What if, however, you have a binary operation with <em>no other</em> properties?
	</p>
	<p>
		<strong>Next:</strong> <a href="/2017/12/27/magmas">Magmas</a>.
	</p>
</div>

<div id="comments">
	<hr/>
	<h2 id="comments-header">Comments</h2>
	<div class="comment" id="azvm7fpdzjtgzfbxo0pnf50nad0n0nk4">
	<div class="comment-author">Onur Sahin</div>
	<div class="comment-content">
		<p>
			Is division over real numbers also a quasigroup? I think so, for any number a and b we have x and y such that: <br/>
			a / x = b <br/>
			y / a = b <br/>
			I think division over integers is not a quasigroup since for 5 and 10 there is no x such that 5 / x = 10 since 0.5 is not an integer.
		</p>
	</div>
		<div class="comment-date">2022-03-27 13:45 UTC</div>	
	</div>

  <div class="comment" id="c5a8abbb257d40c6bd3d612b77d0b8af">
    <div class="comment-author"><a href="{{ HOME_PATH }}">Mark Seemann</a></div>
    <div class="comment-content">
      <p>
        Onur, thank you for writing. In general, when pondering pure mathematics rather than their programming aspects, I'm no authority. You'd be better off researching somewhere else. <a href="https://en.wikipedia.org/wiki/Quasigroup">The Wikipedia article on quasigroups</a> isn't too bad for that purpose, I find.
      </p>
      <p>
      	According to that article, division of non-zero rational or real numbers is an invertible binary operation.
      </p>
      <p>
      	As far as I can tell (I'm not a mathematician) you're correct that integer division doesn't form a quasigroup. When, as you suggestion, you pick <em>a = 5</em> and <em>b = 10</em>, there's no integer <em>x</em> for which <em>5 / x = 10</em>.
      </p>
    </div>
    <div class="comment-date">2022-03-29 7:00 UTC</div>
  </div>
</div>